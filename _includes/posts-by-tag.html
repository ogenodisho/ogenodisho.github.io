{% assign all_tags = "" | split: "" %}
{% for post in site.posts %}
  {% for tag in post.tags %}
    {% unless all_tags contains tag %}
      {% assign all_tags = all_tags | push: tag %}
    {% endunless %}
  {% endfor %}
{% endfor %}

<div class="postList">
  {% for tag in all_tags %}
    <h2>{{ tag }}</h2>
    <ul class="posts">
      {% for post in site.posts %}
        {% if post.tags contains tag %}
          {% include post-entry.html %}
        {% endif %}
      {% endfor %}
    </ul>
  {% endfor %}

  <h2>misc</h2>
  <ul class="posts">
    {% for post in site.posts %}
      {% if post.tags.size == 0 %}
        {% include post-entry.html %}
      {% endif %}
    {% endfor %}
  </ul>
</div>
